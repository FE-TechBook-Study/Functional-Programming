# 민지

## 1. 쏙쏙 들어오는 함수형 코딩에 오신 것을 환영합니다.

-   이 책은 두 파트로 되어 있다.
    1. 액션과 계산, 데이터를 구분하는 것
    2. 일급 추상을 사용하는 것

### 함수형 코딩

-   **함수형 사고: 함수형 프로그래밍의 기술과 개념**을 말한다.
-   함수형 프로그래머는 **코드를 액션과 계산, 데이터로 나눠서 바라본다.**
    -   **액션**: 시간(실행 시점과 횟수)에 의존한다. 그래서 사용하기 가장 어렵고, 이를 코드에서 분리하는 것이 좋다.
    -   **계산**: 시간에 의존하지 않아 다루기 쉽다. 가능한 코드를 계산으로 바꾸는 것이 좋다.
    -   **데이터**: 정적이고 실행 가능하지 않은 사실. 데이터는 저장하거나 이해하기 쉽고 전송하기 편리하다. 액션과 계산의 입출력으로 사용된다.
-   액션 < 계산 < 데이터 순으로 쓰기 쉽다.

## 2장. 현실에서의 함수형 사고

### 유연한 코드를 위한 계층형 설계/계층화 설계

-   함수형 사고하기
    1. **액션과 계산, 데이터를 구분**한다.
        - 목적: 쉽게 다룰 수 있는 부분과 조심히 다뤄야 할 부분을 명확하게 구분
    2. **계층화 설계**를 한다.
        - 목적: 코드를 변경할 때 드는 비용을 줄여 **테스트, 재사용, 유지보수가 쉽도록** 한다.
        - 방법
            - 구분한 액션과 계산, 데이터를 **코드의 변경 가능성**에 따라 **비즈니스 규칙, 도메인 규칙, 기술 스택 계층**으로 코드를 나눈다.
            - 즉, 자주 바뀌는 것(비즈니스 규칙)부터 자주 바뀌지 않는 것(기술 스택)으로 계층을 구분한다.
            - 예를 들어, 피자를 만드는 주방에서 해야 할 일을 자바스크립트로 만든다고 하자. 가장 변경 사항이 없는 것은 자바스크립트이다. 이를 바탕으로 피자를 만드는 조리법을 구성하고, 이 조리법을 바탕으로 이번주 메뉴를 구성할 수 있다. 각각은 기술, 도메인, 비즈니스 문제를 정의하며, 이러한 구조로 소프트웨어를 만들면 코드를 쉽게 변경할 수 있다.

### 타임라인

-   **타임라인 다이어그램**
    -   시간 순서에 따라 실행될 액션을 순차적으로 나타낸 다이어그램
    -   분산 시스템: 여러 액션을 독립적으로 동시에 실행하여 효율적으로 동작.
        -   문제: 액션이 각자의 타임라인을 가지고 있어 실행 순서를 보장할 수 없다.
-   **타임라인 커팅**
    -   여러 타임라인이 동시에 진행(액션 간 협력)될 때 올바른 순서로 실행할 수 있도록 보장하는 방법
    -   **고차 동작**으로 구현한다.
        -   고차 동작: 고차 함수로 만든 동작
        -   각 타임라인이 독립적으로 동작하고, 작업이 완료되면 다른 타임라인이 끝나기를 기다리는 방식

## 3. 액션과 계산, 데이터의 차이를 알기

-   코딩을 시작하기 전 문제를 액션, 계산, 데이터로 나눠 생각해보기. 이때 작성할 때 주의해야 할 부분(액션), 데이터로 처리할 부분, 결정을 내려야 할 부분(계산)을 명확히 나눌 수 있다.
-   코딩을 할 때는 최대한 액션에서 계산을 빼내고, 계산에서 데이터를 분리할 수 있는지 생각해본다.
-   코드를 읽을 때는 숨어있는 액션을 찾을 수 있어야 한다.

### 데이터

-   정의
    -   **이벤트에 대한 사실**, **일어난 일의 결과**
    -   예) 사용자가 입력한 이메일 주소, 은행 API로 읽은 달러 수량
    -   구현: 자바스크립트 기본 데이터 타입(문자열, 숫자, 배열, 객체 등)으로 구현
    -   의미: 데이터 구조로 의미를 담는다.
-   특징: **불변성**
    -   카피-온-라이트(copy-on-write): 변경할 때 복사본을 만든다.
    -   방어적 복사(defensive copy): 보관하려고 하는 데이터의 복사본을 만든다.
-   장점
    -   데이터 자체로 할 수 있는 일이 없기 때문에 데이터를 찾는 일을 먼저 해야 한다.
    1. 직렬화: 전송하거나 디스크에 저장했다가 읽기 쉽다.
    2. 동일성 비교가 쉽다.
    3. 자유롭게 해석할 수 있다.
-   단점
    -   해석이 반드시 필요하다.

### 계산

-   정의
    -   입력값으로 출력값을 만드는 것: **순수함수**, 수학함수
    -   예) 최댓값 찾기, 이메일 주소 올바른지 확인하기
    -   구현: 함수로 구현
    -   의미: 계산에는 연산을 담는다.
-   특징
    -   실행 시점과 횟수에 관계없이 **항상 같은 입력값에 대해 같은 출력값**을 돌려준다.
    -   함수형 프로그래밍의 대부분은 계산을 가지고 하는 일이고, 일반적으로 외부에 있는 액션을 통해 수행된다.
-   **왜 액션보다 계산이 좋나요?**
    -   테스트하기 쉽고, 읽고 이해하기 쉽다.
    -   기계적인 분석이 쉽다.
    -   계산은 조합하기 좋다. (일급 계산)
-   단점
    -   계산과 액션은 실행하기 전에 어떤 일이 발생할지 알 수 없다. 이런 단점이 싫다면 데이터 쓰기

### 액션

-   정의
    -   외부 세계에 영향을 주거나 받는 것: **부수 효과**(side effects), 부수 효과가 있는 함수, 순수하지 않은 함수
    -   예) 이메일 보내기, 데이터베이스 읽기, 전역변숫값 변경, AJAX 요청
    -   구현: 함수로 구현
    -   의미: 외부 세상에 영향을 줄 수 있다.
-   특징
    -   **실행 시점과 횟수에 의존**한다.
    -   함수형 프로그래밍에서 가장 중요하다. 사용하기 어렵지만, 꼭 써야 하기 때문에 잘 사용해야 한다
        -   **가능한 액션을 적게 사용하고, 작게 만든다.** 액션 대신 계산을 사용할 수 있는지 생각해본다.
        -   액션이 외부 세계와 상호작용하는 것을 제한할 수 있다. 내부에 계산과 데이터만 있고, 가장 바깥쪽에 액션이 있는 구조(어니언 아키텍처)가 이상적이다.
        -   액션이 호출 시점에 의존하는 것을 제한한다. 덜 의존적이도로 해야 한다.
    -   **액션은 코드 전체로 퍼진다.**
