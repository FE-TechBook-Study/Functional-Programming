# [4, 5] 액션 계산 분리하기

## 테스트하기 쉽게 만들기

- DOM 업데이트와 비지니스 규칙은 분리.
- 전역변수 제거.

→ 함수형 프로그래밍과 잘 맞음.

## 재사용하기 쉽게 만들기

- 전역변수에 의존하지 않아야 함.
- DOM을 사용할 수 있는 곳에서 실행된다고 가정하면 안됨.
- 함수가 결과 값을 리턴해야함.

## 액션, 계산, 데이터 구분하기

- 함수에는 입력과 출력이 존재합니다.
- 입력과 출력은 명시적이거나 암묵적일 수 있습니다.
ex) 파라미터는 명시적 입력, 전역 변수를 읽는 것은 암묵적 입력, 콘솔에 찍는 것은 암묵적 출력, 전역 변수를 변경한는 것도 암묵적 출력.
- 이러한 암묵적 입력과 출력이 있다면 액션이 됨.

명시적 입력 : 파라미터 (인자)

암묵적 입력 : 인자 외 다른 입력

명시적 출력 : 리턴 값

암묵적 출력 : 리턴 값 외 다른 출력

## 테스트와 재사용성은 입출력과 관련이 있습니다

1) DOM 업데이트와 비지니스 규칙을 분리하자

- DOM을 업데이트 하는 것은 함수에서 어떤 정보가 나오는 것이기에 출력.
- 하지만 리턴 값이 아니기에 암묵적 출력.

2) 전역변수가 없어야 합니다.

- 전역 변수를 읽는 것은 암묵적 입력이고 바꾸는 것은 암묵적 출력
- 임묵적 입력은 인자로 (파라미터) 변경하고 암묵적 출력은 반환 값으로 (return) 변환합니다.

3) 전역변수에 의존하지 않아야 합니다.

4) DOM을 사용할 수 있는 곳에서 실행된다고 가정하면 안됩니다.

- DOM 화면을 위해 만든 함수가 DOM을 직접적으로 사용하고 있습니다. 이것은 암묵적 출력이기 때문에 이런 함수는 return 반환 값으로 변경해서 사용합니다.

5) 함수가 결과 값을 리턴하게 만듭니다.

- 암묵적 출력 대신 명시적 출력을 만드는 것입니다. (리턴 값 외 다른 출력 → 리턴 값)

## 결론

- 액션은 암묵적인 입력 또는 출력을 가지고 있음.
- 계산의 정의에 따르면 계산은 암묵적인 입력이나 출력이 없어야 함.
- 공유 변수는 일반적으로 암묵적 입력 또는 출력이 됨.
- 암묵적 입력은 인자로 바꿀 수 있음.
- 암묵적 출력은 리턴 값으로 바꿀 수 있음.
- 함수형 원칙을 적용하면 액션은 줄어들고 계산이 늘어남.

# 더 좋은 액션 만들기

## 원칙 : 암묵적 입력과 출력은 적을 수록 좋습니다.

- 암묵적 입력과 출력이 적으면 → 계산이 많은 것
- 계산은 테스트하기 쉽고 모듈화 된 컴포넌트를 만들기 쉽다는 장점을 가지고 있음. ⇒ 재사용의 장점

## 원칙 : 설계는 엉켜있는 코드를 푸는 것이다.

- 재사용 : 함수는 작으면 작을수록 재사용 하기 쉬움.
- 유지보수 : 작은 함수는 쉽게 이해할 수 있고 유지보수도 쉬움.
- 테스트 : 작은 함수는 테스트 하기 쉬움.

⇒ 함수를 가능한 작게 만들자..?

## 카피-온-라이트 패턴을 빼내기

- 암묵적 입력과 출력은 파라미터와 리턴 값으로 바꾸는 것이 좋음.
- 설계는 엉켜 있는 것을 푸는 것.
- 엉켜 있는 것을 풀어 각 함수가 하나의 역할만을 하도록 하자 (단일 책임의 원칙)
